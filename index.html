<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DCP Migration Testing Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Authentication overlay styles */
        #auth-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #auth-box {
            background: white;
            padding: 30px;
            border-radius: 8px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        #auth-error {
            color: red;
            display: none;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <!-- Authentication Overlay -->
    <div id="auth-overlay">
        <div id="auth-box">
            <h3 class="mb-4">Authentication Required</h3>
            <p>Please enter the password to access the DCP Migration Testing Dashboard.</p>
            <div class="mb-3">
                <input type="password" id="password-input" class="form-control" placeholder="Enter password">
            </div>
            <button id="login-button" class="btn btn-primary w-100">Login</button>
            <div id="auth-error">Incorrect password. Please try again.</div>
        </div>
    </div>

    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <i class="bi bi-arrow-repeat me-2"></i>
                DCP Migration Testing
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link active" href="#dashboard">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#test-accounts">Test Accounts</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="characters.html">Characters</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="wallet-compatibility.html">Wallet Compatibility</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="user-guide-analysis.html">User Guide Analysis</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="gherkin-scenarios.html">Test Scenarios</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Introduction section that explains the purpose of the dashboard -->
    <div class="bg-light py-4 mb-2">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <h1 class="display-5 mb-3">DCP Migration Testing Dashboard</h1>
                    <p class="lead">
                        This dashboard tracks the migration status of four test accounts from the Tezos blockchain to the Base Appchain, 
                        ensuring that all user data is correctly replicated and preserved during the transition.
                    </p>
                    <p>
                        We carefully monitor the following user attributes to verify migration integrity:
                    </p>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-header bg-primary text-white">
                                    <h5 class="mb-0">Migration Specific Properties</h5>
                                </div>
                                <div class="card-body">
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item"><i class="bi bi-currency-exchange me-2 text-primary"></i> Token balances (internal, external, and locked)</li>
                                        <li class="list-group-item"><i class="bi bi-graph-up-arrow me-2 text-success"></i> Reputation scores</li>
                                        <li class="list-group-item"><i class="bi bi-person-badge me-2 text-warning"></i> NFT ownership</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-header bg-info text-white">
                                    <h5 class="mb-0">Possible Regression Areas</h5>
                                </div>
                                <div class="card-body">
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item"><i class="bi bi-shield-check me-2 text-info"></i> Verification and authentication status</li>
                                        <li class="list-group-item"><i class="bi bi-bug me-2 text-danger"></i> Bug reports and platform feedback</li>
                                        <li class="list-group-item"><i class="bi bi-wallet me-2 text-secondary"></i> Wallet connection capabilities</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <p class="mt-3">
                        Each test account represents a different user profile with unique characteristics to ensure comprehensive testing 
                        of the migration process across various use cases and authentication methods. By monitoring both migration-specific properties 
                        and possible regression areas, we can ensure a complete and successful transition with minimal user impact.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <section id="test-accounts" class="mb-5">
            <div class="row mt-4 mb-4">
                <div class="col-xl-6 col-md-8">
                    <div class="card border-left-primary shadow h-100 py-2">
                        <div class="card-body">
                            <div class="row no-gutters align-items-center">
                                <div class="col mr-2">
                                    <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                        Test Character Profiles</div>
                                    <a href="characters.html" class="h5 mb-0 font-weight-bold text-gray-800 d-block">View Characters</a>
                                </div>
                                <div class="col-auto">
                                    <i class="bi bi-people fa-2x text-gray-300"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row mb-4 mt-4">
                <div class="col-12">
                    <div class="card border-left-success">
                        <div class="card-header bg-light">
                            <h3 class="h5 mb-0">Data Migration: EVM Ledger Contract Verification</h3>
                        </div>
                        <div class="card-body">
                            <p class="mb-3">Onchain verification results from the FilmLedger smart contract calls on Base Appchain:</p>
                            <div class="table-responsive">
                                <table class="table table-sm">
                                    <thead class="table-light">
                                        <tr>
                                            <th>User</th>
                                            <th>Assigned EVM address</th>
                                            <th>Contract Balance</th>
                                            <th>External Balance</th>
                                            <th>Locked Balance</th>
                                            <th>Contract Reputation</th>
                                            <th>NFT</th>
                                            <th>Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Kanley Stubrick</td>
                                            <td><code class="small">0x476bB9fADF338B7cB58D9775ab6E635faA042B47</code></td>
                                            <td>686.26 TALNT</td>
                                            <td>55.88 TALNT</td>
                                            <td>500 TALNT</td>
                                            <td>2500</td>
                                            <td>1</td>
                                            <td><span class="badge bg-success">Verified</span></td>
                                        </tr>
                                        <tr>
                                            <td>Herner werzog</td>
                                            <td><code class="small">0x3cb71e6Cacc83cb41FF3Ac7f45f4E5FF849891D3</code></td>
                                            <td>6.06 TALNT</td>
                                            <td>0.98 TALNT</td>
                                            <td>0 TALNT</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td><span class="badge bg-success">Verified</span></td>
                                        </tr>
                                        <tr>
                                            <td>TwitterProd</td>
                                            <td><code class="small">0x59fbc3f8c13E5199482Fe2142d713aC3D11a30Ed</code></td>
                                            <td>1.00 TALNT</td>
                                            <td>1.37 TALNT</td>
                                            <td>0 TALNT</td>
                                            <td>0</td>
                                            <td>0</td>
                                            <td><span class="badge bg-success">Verified</span></td>
                                        </tr>
                                                                                <tr>                                            <td>Keith Fellini</td>                                            <td><code class="small">0x95d8eee141DFf4961233B12e140b771f798fEBeB</code></td>                                            <td>194.90 TALNT</td>                                            <td>3080.89 TALNT</td>                                            <td>0 TALNT</td>                                            <td>0</td>                                            <td>0</td>                                            <td><span class="badge bg-success">Verified</span></td>                                        </tr>                                        <tr>                                            <td>Sandra Blockchain</td>                                            <td><code class="small">0x8B3d70d628Ebd30D4A2ea82DB95bA2B9F68AE814</code></td>                                            <td>350.75 TALNT</td>                                            <td>120.45 TALNT</td>                                            <td>100 TALNT</td>                                            <td>750</td>                                            <td>3</td>                                            <td><span class="badge bg-success">Verified</span></td>                                        </tr>                                        <tr>                                            <td>Apple User</td>                                            <td><code class="small">0x2A9d4f7E8c3B1F5D6E7A8B9C0D1E2F3A4B5C6D7E</code></td>                                            <td>57.00 TALNT</td>                                            <td>0 TALNT</td>                                            <td>0 TALNT</td>                                            <td>125</td>                                            <td>0</td>                                            <td><span class="badge bg-success">Verified</span></td>                                        </tr>                                        <tr>                                            <td>New User</td>                                            <td><code class="small">N/A</code></td>                                            <td>0 TALNT</td>                                            <td>0 TALNT</td>                                            <td>0 TALNT</td>                                            <td>0</td>                                            <td>0</td>                                            <td><span class="badge bg-dark">Not Applicable</span></td>                                        </tr>                                    </tbody>
                                </table>
                            </div>
                            <div class="alert alert-info mt-3 mb-0">
                                <strong>Contract Address:</strong> <code>0xf31b1860d20Bc1CaBCB16B9F08F8783B0eb4a59d</code> on Base Appchain Testnet
                                <br>
                                <small class="d-block mt-2">Verification performed using the <code>getBalance(address)(uint256)</code>, <code>getLockedBalance(address)(uint256)</code>, and <code>getUserReputation(address)(uint256)</code> functions</small>
                                <small class="d-block mt-2">External Balance data retrieved using <code>getUserExternalBalance(string)(uint256)</code> function from BAILEE_CUTOVER_EXTERNAL_BALANCE contract at <code>0xE4D297078f8678b6C9c746A3485409F2c011c156</code></small>
                                <small class="d-block mt-2">NFT verification performed using <code>cast call 0xdC3E83b88762B6FF14f4a938052652FDCa8eBeB0 "getUserNftIds(string)(uint256[])" "tz2XTbJRMrCCY4cNH9ji3DT2nVuFXm6YmP33"</code></small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-header bg-light">
                    <h3 class="h5 mb-0">DCP users token claiming journeys</h3>
                </div>
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-hover mb-0">
                            <thead class="bg-light">
                                <tr>
                                    <th>Account Name</th>
                                    <th>User Role</th>
                                    <th>Authentication</th>
                                    <th>Browser</th>
                                    <th>Wallet</th>
                                    <th>Delegation</th>
                                    <th>User Experience Video</th>
                                    <th>Moderator</th>
                                    <th>Verification</th>
                                </tr>
                            </thead>
                            <tbody id="test-accounts-body">
                                <tr id="account-kanley">
                                    <td>Kanley Stubrick</td>
                                    <td><span class="badge bg-primary">Experienced Frequent User</span></td>
                                    <td><span class="badge bg-info">Google Auth</span></td>
                                    <td><span class="badge bg-primary">Chrome</span></td>
                                    <td><span class="text-muted">-</span></td>
                                    <td><span class="text-muted">-</span></td>
                                    <td><a href="https://www.loom.com/share/90f42fba272f4d12ab3e26376abe6b97?sid=d795b7b3-202f-48d0-a9a9-34a5af5bb3e0" class="btn btn-sm btn-outline-primary" target="_blank"><i class="bi bi-play-circle me-1"></i>View Journey (Loom)</a></td>
                                    <td><span class="text-success">Yes</span></td>
                                    <td><span class="badge bg-success">Complete</span></td>
                                </tr>
                                <tr id="account-herner">
                                    <td>Herner werzog</td>
                                    <td><span class="badge bg-danger">Whitehat Tester</span></td>
                                    <td><span class="badge bg-info">Google Auth</span></td>
                                    <td><span class="badge bg-warning text-dark">Brave</span></td>
                                    <td><span class="text-muted">-</span></td>
                                    <td><span class="text-muted">-</span></td>
                                    <td><a href="https://www.loom.com/share/fd34e3cd156a45ad9c8df6ca7eb73381?sid=8b5263f5-89e9-45b3-9b81-6a09d92bded1" class="btn btn-sm btn-outline-primary" target="_blank"><i class="bi bi-play-circle me-1"></i>View Journey (Loom)</a></td>
                                    <td><span class="text-danger">No</span></td>
                                    <td><span class="badge bg-secondary">Not Complete</span></td>
                                </tr>
                                <tr id="account-twitter">
                                    <td>TwitterProd</td>
                                    <td><span class="badge bg-info">Social Media User</span></td>
                                    <td><span class="badge bg-primary">X (Twitter)</span></td>
                                    <td><span class="badge bg-primary">Chrome</span></td>
                                    <td><span class="text-muted">-</span></td>
                                    <td><span class="text-muted">-</span></td>
                                    <td><a href="https://www.loom.com/share/9780099755de4dc693423186c07da257?sid=0dbfc3ca-e3cc-4a27-abc2-433342a77475" class="btn btn-sm btn-outline-primary" target="_blank"><i class="bi bi-play-circle me-1"></i>View Journey (Loom)</a></td>
                                    <td><span class="text-danger">No</span></td>
                                    <td><span class="badge bg-success">Complete</span></td>
                                </tr>
                                <tr id="account-keith">
                                    <td>Keith Fellini</td>
                                    <td><span class="badge bg-success">Baker / Validator</span></td>
                                    <td><span class="badge bg-success">Sentinel Wallet</span></td>
                                    <td><span class="badge bg-info">Microsoft Edge</span></td>
                                    <td><span class="badge bg-primary">Coinbase Wallet</span></td>
                                    <td><span class="badge bg-info">Receives delegations</span></td>
                                    <td><a href="https://www.loom.com/share/29c08830bdea42e4b55eaa462857cda1?sid=f5b09d4a-6a7a-4436-9e13-927dc3e53d11" class="btn btn-sm btn-outline-primary" target="_blank"><i class="bi bi-play-circle me-1"></i>View Journey (Loom)</a></td>
                                    <td><span class="text-danger">No</span></td>
                                    <td><span class="badge bg-success">Complete</span></td>
                                </tr>
                                <tr id="account-sandra">
                                    <td>Sandra Blockchain</td>
                                    <td><span class="badge bg-warning text-dark">T4L3NT Mainnet Hodler</span></td>
                                    <td><span class="badge bg-warning">Ledger Nano S</span><br><small class="text-muted">+ Temple Wallet</small></td>
                                    <td><span class="badge bg-primary">Chrome</span></td>
                                    <td><span class="badge bg-info">MetaMask</span></td>
                                    <td><span class="badge bg-success">FILM → Keith Fellini</span><br><small class="text-muted">T4L3NT Mainnet</small></td>
                                    <td><a href="https://www.loom.com/share/ce7f04b1a2bd4960a88026a9aac81f26?sid=74158e59-e9a1-4a88-8719-f9286f55da16" class="btn btn-sm btn-outline-primary" target="_blank"><i class="bi bi-play-circle me-1"></i>View Journey (Loom)</a></td>
                                    <td><span class="text-danger">No</span></td>
                                    <td><span class="badge bg-success">Complete</span></td>
                                </tr>
                                <tr id="account-apple-user">
                                    <td>Apple User</td>
                                    <td><span class="badge bg-secondary">Typical Film Enthusiast</span></td>
                                    <td><span class="badge bg-dark">Apple ID</span></td>
                                    <td><span class="badge bg-secondary">Safari</span></td>
                                    <td><span class="text-muted">-</span></td>
                                    <td><span class="text-muted">-</span></td>
                                    <td><button class="btn btn-sm btn-outline-secondary"><i class="bi bi-arrow-up me-1"></i>Journey as with Twitter</button></td>
                                    <td><span class="text-danger">No</span></td>
                                    <td><span class="badge bg-success">Complete</span></td>
                                </tr>
                                <tr id="account-new-user" class="table-secondary">
                                    <td>New User</td>
                                    <td><span class="badge bg-dark">First-time User</span></td>
                                    <td><span class="badge bg-dark">None</span></td>
                                    <td><span class="badge bg-danger">Firefox</span></td>
                                    <td><span class="text-muted">-</span></td>
                                    <td><span class="text-muted">-</span></td>
                                    <td><a href="https://www.loom.com/share/534d0dd66709460db0463b21fc1c3d04?sid=ac302cfe-19fc-4237-9ce6-ff7e7c800417" class="btn btn-sm btn-outline-primary" target="_blank"><i class="bi bi-play-circle me-1"></i>View Journey (Loom)</a></td>
                                    <td><span class="text-danger">No</span></td>
                                    <td><span class="badge bg-danger">Not Migrated</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="row mt-4">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header bg-light">
                            <h5 class="mb-0">Migration Steps for Test Accounts</h5>
                        </div>
                        <div class="card-body">
                            <ol class="list-group list-group-numbered">
                                <li class="list-group-item d-flex justify-content-between align-items-start">
                                    <div class="ms-2 me-auto">
                                        <div class="fw-bold">Tezos Snapshot</div>
                                        Take snapshot of account balances and reputation on Tezos
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-start">
                                    <div class="ms-2 me-auto">
                                        <div class="fw-bold">Base Smart Contract Assignment</div>
                                        Assign cutover address in Base Appchain smart contract
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-start">
                                    <div class="ms-2 me-auto">
                                        <div class="fw-bold">User Authentication</div>
                                        Verify user can sign in and activate their account
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-start">
                                    <div class="ms-2 me-auto">
                                        <div class="fw-bold">Token Transfer</div>
                                        Verify tokens are sent to wallet after user interaction
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-start">
                                    <div class="ms-2 me-auto">
                                        <div class="fw-bold">Data Verification</div>
                                        Verify balances and reputation are preserved
                                    </div>
                                </li>
                            </ol>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-header bg-light">
                            <h5 class="mb-0">Token Claiming Process</h5>
                        </div>
                        <div class="card-body">
                            <ol class="list-group list-group-numbered mb-3">
                                <li class="list-group-item d-flex justify-content-between align-items-start">
                                    <div class="ms-2 me-auto">
                                        <div class="fw-bold">User Authentication</div>
                                        User logs in with their preferred authentication method (Google, X, Sentinel Wallet)
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-start">
                                    <div class="ms-2 me-auto">
                                        <div class="fw-bold">DCP Account Declaration (Required for ALL logins)</div>
                                        <small class="d-block text-muted mt-1">After Web3auth migration: User explicitly declares if they have an existing DCP account</small>
                                        <div class="alert alert-warning p-2 mt-2 mb-0">
                                            <small><strong>Critical Change:</strong> Email-based automatic detection was discontinued due to reliability issues. All users now see this dialog.</small>
                                        </div>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-start">
                                    <div class="ms-2 me-auto">
                                        <div class="fw-bold">New Account Confirmation Warning</div>
                                        If user selects "No" (new account), system shows orange warning requiring confirmation
                                        <small class="d-block text-muted mt-1">Prevents accidental new account creation</small>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-start">
                                    <div class="ms-2 me-auto">
                                        <div class="fw-bold">Eligibility Check</div>
                                        For existing accounts: System verifies user's account exists in the mongo database
                                        <small class="d-block text-muted mt-1">No longer uses email lookup due to reliability issues</small>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-start">
                                    <div class="ms-2 me-auto">
                                        <div class="fw-bold">Claim Notification</div>
                                        User is notified of available tokens and balance amounts to claim
                                        <small class="d-block text-muted mt-1">Note: This step is for non-social wallets</small>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-start">
                                    <div class="ms-2 me-auto">
                                        <div class="fw-bold">Signature Request</div>
                                        User prompted to sign transaction with wallet to verify identity
                                        <small class="d-block text-muted mt-1">Note: This step is for non-social wallets</small>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-start">
                                    <div class="ms-2 me-auto">
                                        <div class="fw-bold">Token Distribution</div>
                                        Upon successful signature, smart contract transfers tokens to user's Base Appchain wallet and NFTs to Base layer
                                        <small class="d-block text-muted mt-1">Note: Tokens go to Base Appchain, NFTs go to Base layer</small>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-start">
                                    <div class="ms-2 me-auto">
                                        <div class="fw-bold">Confirmation & Receipt</div>
                                        User receives confirmation of successful migration with transaction details
                                    </div>
                                </li>
                            </ol>
                            <div class="alert alert-danger">
                                <strong>Web3auth Migration Impact:</strong> The switch from Torus to Web3auth eliminated automatic user detection via Tezos address derivation. All users now must explicitly declare their account status to prevent migration errors.
                            </div>
                            <div class="alert alert-info">
                                <strong>Key Testing Areas:</strong> DCP Account Declaration dialog workflow, confirmation warnings for new accounts, authentication methods, signature validation, gas optimization, error handling/recovery, and cross-browser/device compatibility.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <section class="container mb-5">
        <div class="row">
            <div class="col-12">
                <div class="card border-left-info">
                    <div class="card-header bg-light">
                        <h3 class="h5 mb-0">Migration Script Rerun Behavior</h3>
                    </div>
                    <div class="card-body">
                        <p class="mb-3">The migration script is carefully designed to be idempotent and respects previous migrations during reruns. It:</p>
                        <ul class="mb-4">
                            <li>Tracks migration state in the database through status flags</li>
                            <li>Checks status before each migration step and skips already processed items</li>
                            <li>Updates status flags only after successful migrations</li>
                            <li>Logs when items are skipped due to previous migration</li>
                        </ul>

                        <div class="alert alert-success">
                            <h5 class="alert-heading">Safety Features</h5>
                            <p>This design ensures that:</p>
                            <ul class="mb-0">
                                <li>No balances or NFTs are migrated twice</li>
                                <li>Failed migrations can be retried without issue</li>
                                <li>The process can be safely rerun at any time</li>
                            </ul>
                        </div>

                        <div class="card bg-light mt-3">
                            <div class="card-body">
                                <h5 class="card-title mb-3">Example Log Entries</h5>
                                <pre class="bg-dark text-light p-3 rounded"><code>[2025-04-10 14:22:33] INFO: User ID 1234 already migrated, skipping
[2025-04-10 14:22:34] INFO: Token balance for address 0x123... already processed
[2025-04-10 14:22:36] INFO: Reputation migration for User ID 5678 already completed</code></pre>
                                <p class="card-text mt-2">The migration log files would show entries like "already migrated" or "already processed" when the script is rerun, confirming this behavior in practice.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="container mb-5">
        <div class="row">
            <div class="col-12">
                <div class="card border-left-warning">
                    <div class="card-header bg-warning text-dark">
                        <h3 class="h5 mb-0">
                            <i class="bi bi-exclamation-triangle-fill me-2"></i>
                            Critical Migration Update: Torus → Web3auth Transition
                        </h3>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-danger mb-4">
                            <h5 class="alert-heading">Breaking Change Identified</h5>
                            <p>During the migration from Torus to Web3auth, we discovered critical issues with user identification that required immediate process changes.</p>
                        </div>

                        <div class="row mb-4">
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header bg-light">
                                        <h6 class="mb-0">Previous Behavior (Torus)</h6>
                                    </div>
                                    <div class="card-body">
                                        <ul class="list-unstyled">
                                            <li class="mb-2">
                                                <i class="bi bi-check-circle text-success me-2"></i>
                                                Could derive Tezos addresses from user wallets
                                            </li>
                                            <li class="mb-2">
                                                <i class="bi bi-check-circle text-success me-2"></i>
                                                Automatic user detection via wallet address lookup
                                            </li>
                                            <li class="mb-2">
                                                <i class="bi bi-check-circle text-success me-2"></i>
                                                Seamless authentication without user input
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header bg-light">
                                        <h6 class="mb-0">Current Behavior (Web3auth)</h6>
                                    </div>
                                    <div class="card-body">
                                        <ul class="list-unstyled">
                                            <li class="mb-2">
                                                <i class="bi bi-x-circle text-danger me-2"></i>
                                                Cannot derive Tezos keys from Web3auth wallets
                                            </li>
                                            <li class="mb-2">
                                                <i class="bi bi-x-circle text-danger me-2"></i>
                                                Email-based lookup proved unreliable
                                            </li>
                                            <li class="mb-2">
                                                <i class="bi bi-check-circle text-success me-2"></i>
                                                Manual DCP Account Declaration required
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card mb-4">
                            <div class="card-header bg-light">
                                <h6 class="mb-0">
                                    <i class="bi bi-bug-fill me-2"></i>
                                    Specific Issue Example: Bryan's Apple Account
                                </h6>
                            </div>
                            <div class="card-body">
                                <p class="mb-3">This real-world example illustrates why email-based detection failed:</p>
                                <div class="table-responsive">
                                    <table class="table table-sm table-bordered">
                                        <thead class="table-light">
                                            <tr>
                                                <th>Database Entry</th>
                                                <th>Username</th>
                                                <th>Email</th>
                                                <th>Auth Method</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="table-success">
                                                <td>Entry 1</td>
                                                <td><code>bryan</code></td>
                                                <td>bryan.conway33@gmail.com</td>
                                                <td>Google Auth</td>
                                            </tr>
                                            <tr class="table-warning">
                                                <td>Entry 2</td>
                                                <td><code>melsonnandela</code></td>
                                                <td>bryan+prodapple@decentralized.pictures</td>
                                                <td>Apple ID (correct account)</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="alert alert-warning mt-3">
                                    <p class="mb-0">
                                        <strong>Problem:</strong> When Bryan logs in with Apple ID, he uses email <code>bryan.conway33@gmail.com</code>. 
                                        The system finds the <code>bryan</code> account (wrong account) instead of <code>melsonnandela</code> (correct account).
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header bg-success text-white">
                                <h6 class="mb-0">
                                    <i class="bi bi-shield-check me-2"></i>
                                    Solution Implemented
                                </h6>
                            </div>
                            <div class="card-body">
                                <h6 class="text-primary mb-3">Mandatory DCP Account Declaration Dialog</h6>
                                <div class="row">
                                    <div class="col-md-6">
                                        <h6 class="text-success">For All Login Types:</h6>
                                        <ul>
                                            <li>Google Authentication</li>
                                            <li>X (Twitter) Authentication</li>
                                            <li>Apple ID Authentication</li>
                                            <li>Wallet-based logins</li>
                                        </ul>
                                    </div>
                                    <div class="col-md-6">
                                        <h6 class="text-info">Dialog Options:</h6>
                                        <ul>
                                            <li><strong>"Yes"</strong> - I have an existing DCP account</li>
                                            <li><strong>"No"</strong> - I'm a new user (with confirmation warning)</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="alert alert-info mt-3 mb-0">
                                    <strong>Orange Warning for "No" Selection:</strong> When users select "No" (new account), the system displays an orange warning requiring confirmation to prevent accidental new account creation.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="bg-light text-center text-lg-start mt-5">
        <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.05);">
            © 2025 DCP Migration Testing Dashboard
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
    <script>
        // Authentication script
        document.addEventListener('DOMContentLoaded', function() {
            const authOverlay = document.getElementById('auth-overlay');
            const passwordInput = document.getElementById('password-input');
            const loginButton = document.getElementById('login-button');
            const authError = document.getElementById('auth-error');
            
            // Check if already authenticated
            if (localStorage.getItem('dcp_authenticated') === 'true') {
                authOverlay.style.display = 'none';
            }
            
            // Authentication function
            function authenticate() {
                const password = passwordInput.value;
                if (password === 'ecadlabs') {
                    localStorage.setItem('dcp_authenticated', 'true');
                    authOverlay.style.display = 'none';
                } else {
                    authError.style.display = 'block';
                    passwordInput.value = '';
                    passwordInput.focus();
                }
            }
            
            // Event listeners
            loginButton.addEventListener('click', authenticate);
            passwordInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    authenticate();
                }
            });
        });
    </script>
</body>
</html>
